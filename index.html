<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="description" content="Count the Notes: Histogram-Based Supervision for Automatic Music Transcription">
  <meta name="keywords" content="AMT, Music Transcription, Histogram Supervision">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Count the Notes</title>

  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">
  <link rel="stylesheet" href="./static/css/bulma.min.css">
  <link rel="stylesheet" href="./static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="./static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="./static/css/fontawesome.all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="./static/css/index.css">
  <style>
    video {
      max-width: 480px;
      width: 100%;
      height: auto;
      display: block;
      margin: 0 auto;
    }
  </style>
  <style>
    table.table td,
    table.table th {
      text-align: center !important;
      vertical-align: middle !important;
    }
  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script defer src="./static/js/fontawesome.all.min.js"></script>
  <script src="./static/js/bulma-carousel.min.js"></script>
  <script src="./static/js/bulma-slider.min.js"></script>
  <script src="./static/js/index.js"></script>
</head>

<body>

  <section class="hero">
    <div class="hero-body">
      <div class="container is-widescreen">
        <div class="columns is-centered">
          <div class="column has-text-centered">
            <h1 class="title is-1 publication-title">Count the Notes: Histogram-Based Supervision for Automatic Music
              Transcription</h1>
            <div class="is-size-5 publication-authors">
              <span class="author-block">Jonathan Yaffe<sup>1</sup>,</span>
              <span class="author-block"><a href="https://scholar.google.com/citations?user=2fTnAp8AAAAJ&hl=en&oi=ao">Ben Maman</a><sup>2</sup>,</span>
              <span class="author-block"><a href="https://www.audiolabs-erlangen.de/fau/professor/mueller">Meinard
                  Müller</a><sup>2</sup></span>
              <span class="author-block"><a href="https://www.cs.tau.ac.il/~amberman/">Amit H.
                  Bermano</a><sup>1</sup></span>
            </div>
            <div class="is-size-5 publication-authors">
              <span class="author-block"><sup>1</sup>Tel Aviv University,</span>
              <span class="author-block"><sup>2</sup>International Audio Laboratories Erlangen, Germany</span>
            </div>

            <div class="column has-text-centered">
              <div class="publication-links">
                <!-- <span class="link-block">
              <a href="static/pdfs/count_the_notes.pdf" class="external-link button is-normal is-rounded is-dark" target="_blank">
              <span class="icon"><i class="fas fa-file-pdf"></i></span>
              <span>Paper</span>
            </a>
              </span>
              <span class="link-block">
                <a href="https://arxiv.org/abs/2406.17382" class="external-link button is-normal is-rounded is-dark">
                  <span class="icon"><i class="ai ai-arxiv"></i></span>
                  <span>arXiv</span>
                </a>
              </span> -->
                <span class="link-block">
                  <a href="https://github.com/Yoni-Yaffe/count-the-notes"
                    class="external-link button is-normal is-rounded is-dark">
                    <span class="icon"><i class="fab fa-github"></i></span>
                    <span>Code & Data</span>
                  </a>
                </span>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container content">
      <h2 class="title is-4" style="text-align: center;">Abstract</h2>
      <p>
        Automatic Music Transcription (AMT) converts audio recordings into symbolic musical representations. Training
        deep neural networks (DNNs) for AMT typically requires strongly aligned training pairs with precise frame-level
        annotations. Since creating such datasets is costly and impractical for many musical contexts, weakly aligned
        approaches using segment-level annotations have gained traction. However, existing methods often rely on Dynamic
        Time Warping (DTW) or soft alignment loss functions, both of which still require local semantic correspondences,
        making them error-prone and computationally expensive. In this article, we introduce CountEM, a novel AMT
        framework that eliminates the need for explicit local alignment by leveraging note event histograms as
        supervision, enabling lighter computations and greater flexibility. Using an Expectation-Maximization (EM)
        approach, CountEM iteratively refines predictions based solely on note occurrence counts, significantly reducing
        annotation efforts while maintaining high transcription accuracy. Experiments on piano, guitar, and
        multi-instrument datasets demonstrate that CountEM matches or surpasses existing weakly supervised methods,
        improving AMT's robustness, scalability, and efficiency.
      </p>
    </div>
  </section>

  <section class="section">
    <div class="container content">
      <h2 class="title is-4" style="text-align: center;">Qualitative Examples</h2>
      <p>Each video begins with the original audio and transitions into the model's transcription. The transcriptions
        are generated by models trained using our proposed counting-based alignment approach. Under each video, we also
        provide a link to the original piece for reference and comparison.</p>

      <div class="columns is-multiline">
        <div class="column is-half">
          <h3 class="title is-6" style="text-align: center;">1. Rejouissance (Clarinet, Sax, Tuba)</h3>
          <video controls>
            <source src="static/videos/23_Rejouissance_cl_sax_tba_colored.mp4" type="video/mp4">
          </video>
          <p style="text-align: center;"><a href="https://labsites.rochester.edu/air/projects/URMP.html"
              target="_blank">Original Piece</a></p>
        </div>

        <div class="column is-half">
          <h3 class="title is-6" style="text-align: center;">2. ABBA - Mamma Mia</h3>
          <video controls>
            <source src="static/videos/abba_colored.mp4" type="video/mp4">
          </video>
          <p style="text-align: center;"><a href="https://www.youtube.com/watch?v=unfzfe8f9NI" target="_blank">Original
              Piece</a></p>
        </div>

        <div class="column is-half">
          <h3 class="title is-6" style="text-align: center;">3. Bach – Violin Partita No. 2</h3>
          <video controls>
            <source src="static/videos/Bach：Violin Partita No2_VIOLIN.mp4" type="video/mp4">
          </video>
          <p style="text-align: center;"><a href="https://youtu.be/gryLt8QrKvE?si=PMCvf2I8VlgLyp1v&t=649"
              target="_blank">Original Piece</a></p>
        </div>

        <div class="column is-half">
          <h3 class="title is-6" style="text-align: center;">4. Beethoven Sonata No. 25 (Piano)</h3>
          <video controls>
            <source src="static/videos/Beethoven Sonata No_25_PIANO_colored.mp4" type="video/mp4">
          </video>
          <p style="text-align: center;"><a href="https://youtu.be/QovNsObNtVo?si=-6U2dAfoQnOtYxbc"
              target="_blank">Original Piece</a></p>
        </div>

        <div class="column is-half">
          <h3 class="title is-6" style="text-align: center;">5. Vivaldi – Four Seasons</h3>
          <video controls>
            <source src="static/videos/four_Seasons.mp4" type="video/mp4">
          </video>
          <p style="text-align: center;"><a href="https://youtu.be/GRxofEmo3HA?si=ko4PPGhj55KuGBEr"
              target="_blank">Original Piece</a></p>
        </div>

        <div class="column is-half">
          <h3 class="title is-6" style="text-align: center;">6. Hagrid's Friendly Bird (Flute)</h3>
          <video controls>
            <source src="static/videos/Hagrid's friendly bird _FLUTE_colored.mp4" type="video/mp4">
          </video>
          <p style="text-align: center;"><a href="https://youtu.be/_mGzWtuf2X8?si=7OXKLNJLXQn3yv85"
              target="_blank">Original Piece</a></p>
        </div>

        <div class="column is-half">
          <h3 class="title is-6" style="text-align: center;">7. Pachelbel – Canon in D (String Quartet)</h3>
          <video controls>
            <source src="static/videos/Johann Pachelbel Canon in D STRING_QUARTET.mp4" type="video/mp4">
          </video>
          <p style="text-align: center;"><a href="https://youtu.be/es_3F3TLJS0?si=fd-sULA_c9Fg_WD7&t=102"
              target="_blank">Original Piece</a></p>
        </div>

        <div class="column is-half">
          <h3 class="title is-6" style="text-align: center;">8. MAESTRO Example (Track02)</h3>
          <video controls>
            <source src="static/videos/maestro_example.mp4" type="video/mp4">
          </video>
          <p style="text-align: center;"><a href="https://magenta.tensorflow.org/datasets/maestro"
              target="_blank">Original Piece</a></p>
        </div>

        <div class="column is-half">
          <h3 class="title is-6" style="text-align: center;">9. Mozart – Violin Sonata No. 32</h3>
          <video controls>
            <source src="static/videos/Mozart - Violin Sonata No 32_VIOLIN_PIANO.mp4" type="video/mp4">
          </video>
          <p style="text-align: center;"><a href="https://youtu.be/zM6p0I2KTdU?si=EqeiWnlQvdmEahB4&t=950"
              target="_blank">Original Piece</a></p>
        </div>
      </div>
    </div>
  </section>


  <section class="section">
    <div class="container content">

      <h2 class="title is-4">MAESTRO Histogram Supervision Results</h2>
      <p>
        Note-level transcription results for training with histogram-based supervision on the MAESTRO dataset.
        We report Precision (P), Recall (R), and F-score (F) for test and train sets across different histogram window
        sizes (or Full Track).
        For reference, results include a baseline trained on synthetic data only (<code>Sy</code>) and a supervised
        model (<code>Sup</code>).
      </p>

      <div class="table-container">
        <table class="table is-bordered is-striped is-fullwidth is-size-7">
          <thead>
            <tr>
              <th colspan="2">Model</th>
              <th colspan="3">Test</th>
              <th colspan="3">Train</th>
            </tr>
            <tr>
              <th></th>
              <th></th>
              <th>P</th>
              <th>R</th>
              <th>F</th>
              <th>P</th>
              <th>R</th>
              <th>F</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td></td>
              <td colspan="7" class="has-text-centered">Pre-trained Model</td>
            </tr>
            <tr>
              <td></td>
              <td><code>Sy</code></td>
              <td>88.3</td>
              <td>81.6</td>
              <td>84.6</td>
              <td>87.8</td>
              <td>81.2</td>
              <td>84.1</td>
            </tr>

            <tr>
              <td></td>
              <td colspan="7" class="has-text-centered">Histogram Supervision</td>
            </tr>
            <tr>
              <td rowspan="5" style="vertical-align: middle;">Rep.<br>iter.</td>
              <td><code>F/T</code></td>
              <td>92.4</td>
              <td>90.4</td>
              <td>91.3</td>
              <td>91.8</td>
              <td>90.5</td>
              <td>91.1</td>
            </tr>
            <tr>
              <td><code>180s</code></td>
              <td>93.2</td>
              <td>91.7</td>
              <td>92.4</td>
              <td>92.9</td>
              <td>91.9</td>
              <td>92.4</td>
            </tr>
            <tr>
              <td><code>120s</code></td>
              <td>93.1</td>
              <td>92.2</td>
              <td>92.6</td>
              <td>92.8</td>
              <td>92.4</td>
              <td>92.6</td>
            </tr>
            <tr>
              <td><code>60s</code></td>
              <td>95.7</td>
              <td>92.2</td>
              <td>93.9</td>
              <td>95.6</td>
              <td>92.5</td>
              <td>94.0</td>
            </tr>
            <tr>
              <td><code>30s</code></td>
              <td>95.5</td>
              <td>92.8</td>
              <td>94.1</td>
              <td>95.3</td>
              <td>93.1</td>
              <td>94.2</td>
            </tr>

            <tr>
              <td rowspan="2" style="vertical-align: middle;">1-iter.</td>
              <td><code>F/T</code></td>
              <td>92.4</td>
              <td>87.1</td>
              <td>89.6</td>
              <td>91.9</td>
              <td>87.3</td>
              <td>89.5</td>
            </tr>
            <tr>
              <td><code>60s</code></td>
              <td>93.9</td>
              <td>88.4</td>
              <td>91.0</td>
              <td>93.6</td>
              <td>88.5</td>
              <td>90.9</td>
            </tr>

            <tr>
              <td></td>
              <td><code>Sup</code></td>
              <td>98.7</td>
              <td>93.1</td>
              <td>95.8</td>
              <td>98.8</td>
              <td>93.4</td>
              <td>96.0</td>
            </tr>
          </tbody>
        </table>
      </div>


      <h2 class="title is-4">Cross-Dataset Evaluation</h2>
      <p>Training was performed on MusicNet, with evaluation on MAESTRO, GuitarSet, and URMP. For URMP, we also report
        F-histogram, which does not enforce the 50ms onset threshold.</p>

      <div class="table-container">
        <table class="table is-bordered is-striped is-fullwidth is-size-7">
          <thead>
            <tr>
              <th>Model</th>
              <th colspan="3">MAESTRO</th>
              <th colspan="3">GuitarSet</th>
              <th colspan="3">URMP</th>
              <th colspan="3">URMP (Histog.)</th>
            </tr>
            <tr>
              <th></th>
              <th>P</th>
              <th>R</th>
              <th>F</th>
              <th>P</th>
              <th>R</th>
              <th>F</th>
              <th>P</th>
              <th>R</th>
              <th>F</th>
              <th>P</th>
              <th>R</th>
              <th>F</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th colspan="13" class="has-text-centered">Pre-trained Model</th>
            </tr>
            <tr>
              <td>Sy</td>
              <td>88.3</td>
              <td>81.6</td>
              <td>84.6</td>
              <td>57.9</td>
              <td>80.7</td>
              <td>66.2</td>
              <td>76.2</td>
              <td>65.4</td>
              <td>70.1</td>
              <td>91.8</td>
              <td>79.8</td>
              <td>84.9</td>
            </tr>

            <tr>
              <th colspan="13" class="has-text-centered">Histogram Supervision MusicNet Piano (ours)</th>
            </tr>
            <tr>
              <td>30s</td>
              <td>93.0</td>
              <td>88.2</td>
              <td>90.4</td>
              <td>77.8</td>
              <td>82.5</td>
              <td>79.4</td>
              <td>70.1</td>
              <td>79.6</td>
              <td>74.5</td>
              <td>80.1</td>
              <td>90.8</td>
              <td>85.0</td>
            </tr>
            <tr>
              <td>F/T</td>
              <td>92.1</td>
              <td>85.8</td>
              <td>88.7</td>
              <td>81.2</td>
              <td>80.1</td>
              <td>79.8</td>
              <td>77.3</td>
              <td>75.1</td>
              <td>76.1</td>
              <td>89.7</td>
              <td>87.1</td>
              <td>88.3</td>
            </tr>

            <tr>
              <th colspan="13" class="has-text-centered">Histogram Supervision MusicNet Full (ours)</th>
            </tr>
            <tr>
              <td>32ms</td>
              <td>77.1</td>
              <td>12.1</td>
              <td>16.7</td>
              <td>85.5</td>
              <td>5.0</td>
              <td>8.6</td>
              <td>56.9</td>
              <td>1.5</td>
              <td>2.8</td>
              <td>100.0</td>
              <td>19.0</td>
              <td>36.0</td>
            </tr>
            <tr>
              <td>100ms</td>
              <td>94.7</td>
              <td>33.9</td>
              <td>43.9</td>
              <td>91.3</td>
              <td>31.9</td>
              <td>40.6</td>
              <td>90.2</td>
              <td>6.0</td>
              <td>11.2</td>
              <td>100.0</td>
              <td>6.6</td>
              <td>12.1</td>
            </tr>
            <tr>
              <td>500ms</td>
              <td>92.4</td>
              <td>80.5</td>
              <td>85.8</td>
              <td>90.5</td>
              <td>69.2</td>
              <td>75.8</td>
              <td>82.9</td>
              <td>70.6</td>
              <td>76.1</td>
              <td>97.7</td>
              <td>83.2</td>
              <td>89.8</td>
            </tr>
            <tr>
              <td>30s</td>
              <td>94.5</td>
              <td>86.0</td>
              <td>89.9</td>
              <td>88.5</td>
              <td>75.4</td>
              <td>80.3</td>
              <td>82.2</td>
              <td>79.9</td>
              <td>80.9</td>
              <td>93.0</td>
              <td>90.4</td>
              <td>91.6</td>
            </tr>
            <tr>
              <td>60s</td>
              <td>93.1</td>
              <td>86.1</td>
              <td>89.3</td>
              <td>86.7</td>
              <td>78.5</td>
              <td>81.5</td>
              <td>81.9</td>
              <td>79.7</td>
              <td>80.7</td>
              <td>92.6</td>
              <td>90.3</td>
              <td>91.3</td>
            </tr>
            <tr>
              <td>F/T</td>
              <td>92.4</td>
              <td>85.0</td>
              <td>88.4</td>
              <td>82.8</td>
              <td>82.4</td>
              <td>82.0</td>
              <td>81.6</td>
              <td>78.2</td>
              <td>79.7</td>
              <td>92.3</td>
              <td>88.8</td>
              <td>90.3</td>
            </tr>

            <tr>
              <th colspan="13" class="has-text-centered">DTW + Refinement</th>
            </tr>
            <tr>
              <td>M&B AlPl</td>
              <td>92.6</td>
              <td>87.2</td>
              <td>89.7</td>
              <td>86.6</td>
              <td>80.4</td>
              <td>82.9</td>
              <td>81.7</td>
              <td>77.6</td>
              <td>79.6</td>
              <td>95.6</td>
              <td>91.0</td>
              <td>93.2</td>
            </tr>
            <tr>
              <td>M&B Al</td>
              <td>96.4</td>
              <td>83.4</td>
              <td>89.2</td>
              <td>89.0</td>
              <td>76.9</td>
              <td>81.5</td>
              <td>84.0</td>
              <td>75.2</td>
              <td>79.3</td>
              <td>96.6</td>
              <td>86.8</td>
              <td>91.3</td>
            </tr>
          </tbody>
        </table>
      </div>

  </section>

</body>

</html>